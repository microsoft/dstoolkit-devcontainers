$schema: https://azuremlschemas.azureedge.net/latest/commandComponent.schema.json
type: command

display_name: pytorch-evaluate-component
name: pytorch_evaluate_component
description: Evaluate metrics from model inference on test set.
version: 1

code: /workspace/src/sample_pytorch_gpu_project
command: >-
  python evaluate.py --preds_csv ${{inputs.inference_preds_dir}}/preds.csv
inputs:
  metadata_csv:
    type: uri_file
  inference_preds_dir:
    type: uri_folder
environment: azureml:pytorch-gpu-env@latest  # should match name used in aml_setup/create-env.yaml